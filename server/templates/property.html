<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Property Details - RENTLY</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Montserrat', sans-serif;
        }

        .navbar {
            background-color: #33ccff;
            border-radius: 25px;
            padding: 10px 20px;
            margin-bottom: 20px;

           
        }
        .navbar-brand {
            font-size: 24px;
            font-weight: bold;
            color: white !important;
        }

        .btn-logout{
            background-color: white;
            color: #2cb5e8;
            border-radius: 25px;
            padding: 0.5rem 1rem;
        }
    
        .btn-logout:hover {
            color: white;
            border-color: white;
        }

        .btn-login{
            background-color: white;
            color: #2cb5e8;
            margin-right: 1rem;
            border-radius: 25px;
            padding: 0.5rem 1rem;
        }
    
        .btn-login:hover {
            color: white;
            border-color: white;
        }

        .btn-signup {
            color: white;
            border-color: white;
            border-radius: 25px;
            padding: 0.5rem 1rem;
        }

        .btn-signup:hover {
            background-color: white;
            color: #33ccff;
        }


        .nav-link {
            color: white !important;
        }

        .property-title {
            color: #33ccff;
            margin-bottom: 1rem;
        }

        .carousel-inner img {
            width: 100%;
            height: auto;
            border-radius: 0.5rem;
            cursor: pointer;
        }

        .property-details {
            margin-top: 2rem;
        }

        .landlord-info {
            border: 1px solid #e5e5e5;
            padding: 1rem;
            border-radius: 0.5rem;
            background-color: #f8f9fa;
            text-align: center;
        }

        .landlord-info img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            margin-bottom: 1rem;
        }

        .landlord-info h5 {
            margin-bottom: 0.5rem;
            font-weight: bold;
        }

        .btn-primary, .btn-secondary {
            margin-top: 1rem;
        }

        .btn-primary {
            background-color: #33ccff;
            border-color: #33ccff;
        }

        .btn-primary:hover {
            background-color: #2cb5e8;
            border-color: #2cb5e8;
        }

        .btn-secondary {
            background-color: white;
            color: #33ccff;
            border-color: #33ccff;
        }

        .btn-secondary:hover {
            background-color: #f0f8ff;
            border-color: #33ccff;
        }

        .card-body ul {
            list-style-type: none;
            padding: 0;
        }

        .card-body ul li {
            margin-bottom: 0.5rem;
        }

        .card-body ul li i {
            color: #33ccff;
            margin-right: 0.5rem;
        }

        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 90%;
            max-width: 600px;
            height: 60px;
            border-radius: 20px 20px 0 0;
            background-color: white;
            display: flex;
            justify-content: space-around;
            align-items: center;
            z-index: 1030;
            box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.3);
        }
    
        .bottom-nav .nav-link {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 0.5rem;
            font-size: 0.8rem;
            color: #33ccff !important;
            text-decoration: none;
            text-align: center;
        }
    
        .bottom-nav .nav-link i {
            margin-bottom: 0.2rem;
            color: #33ccff !important;
        }

        
        .profile-pic {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
            margin-left: 1rem;
            margin-right: 1rem;
        }
        
        .footer {
            background-color: #333;
            color: white;
            padding: 2rem 0;
        }

        .footer {
            background-color: #f8f9fa;
            padding: 2rem 0;
            font-family: 'Montserrat', sans-serif;
            border-top: 1px solid #e5e5e5;
        }
        
        .footer h5 {
            color: #33ccff;
            font-weight: bold;
        }
        
        .footer p {
            color: #333;
            margin-bottom: 1rem;
        }
        
        .footer a {
            color: #33ccff;
            text-decoration: none;
        }
        
        .footer a:hover {
            text-decoration: underline;
        }
        
        .footer .social-links {
            display: flex;
            gap: 0.5rem;
        }
        
        .footer .social-icon {
            font-size: 1.2rem;
            color: #33ccff;
            transition: color 0.3s;
        }
        
        .footer .social-icon:hover {
            color: #2cb5e8;
        }
        
        .footer .container {
            max-width: 960px;
        }
        
        .footer .text-center p {
            color: #777;
            margin: 0;
            font-size: 0.875rem;
        }

        .profile-pic-container {
            position: relative;
            display: inline-block;
            cursor: pointer;
        }

        .profile-pic2 {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            object-fit: cover;
        }

        .profile-pic-input {
            display: none;
        }

        .profile-pic-label {
            display: block;
            position: relative;
        }

        .profile-pic-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            color: #fff;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 50%;
            transition: opacity 0.3s;
        }

        .profile-pic-overlay i {
            margin-right: 0.25rem;
        }

        .change-btn {
            position: absolute;
            bottom: -1.8rem;
            left: 50%;
            transform: translateX(-50%);
            background-color: #33ccff;
            color: #fff;
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            font-size: 0.8rem;
            text-decoration: none;
            margin-top: 20px;
        }
        
        .change-btn:hover {
            background-color: #2cb5e8;
        }

        @media (max-width: 768px) {
            
            .btn-logout, .btn-signup {
                margin-left: 0px;
                margin-top: 10px;
            }
        }

    </style>
</head>
<body>

    <!-- Top Navbar -->
    <div class="container mt-4">
        <nav class="navbar navbar-expand-lg">
            <div class="container-fluid">
                <a class="navbar-brand" href="#">RENTLY</a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-auto">
                        <li class="nav-item">
                            <a class="nav-link" href="{{url_for('home')}}">Home</a>
                        </li>
                        <!-- <li class="nav-item">
                            <a class="nav-link" href="#">Dashboard</a>
                        </li> -->
                        <li class="nav-item">
                            <a class="nav-link" href="#">About</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="#">Contact</a>
                        </li>
                        {% if logged_in %}
                        <li class="nav-item">
                            <a href="#"><img src="{{data['profile_pic']}}" alt="Profile" class="profile-pic" data-bs-toggle="modal" data-bs-target="#userDetailsModal"></a>
                        </li>
                        <li class="nav-item">
                            <button class="btn btn-logout">Logout</button>
                        </li> 
                        {% else %}
                        <li class="nav-item">
                            <button class="btn btn-login" data-bs-toggle="modal" data-bs-target="#loginModal">Login</button>
                        </li>
                        <li class="nav-item">
                            <button class="btn btn-signup">Sign Up</button>
                        </li>
                        {% endif %}
                        
                    </ul>
                    
                </div>
            </div>
        </nav>
    

    <!-- Property Details -->
    <div class="container mt-5">
        <div class="row">
            <div class="col-md-8">
                <h2 class="property-title">{{data.address}}, {{data.city}}, {{data.state}} </h2>
                
                <div id="propertyCarousel" class="carousel slide" data-bs-ride="carousel">
                    <div class="carousel-inner">
                        <div class="carousel-item active">
                            <img src="{{data.property_imgs}}{{data.file_1}}" alt="Property Image 1" data-bs-toggle="modal" data-bs-target="#imageModal1">
                        </div>
                        <div class="carousel-item">
                            <img src="{{data.property_imgs}}{{data.file_2}}" alt="Property Image 2" data-bs-toggle="modal" data-bs-target="#imageModal2">
                        </div>
                        <div class="carousel-item">
                            <img src="{{data.property_imgs}}{{data.file_3}}" alt="Property Image 3" data-bs-toggle="modal" data-bs-target="#imageModal3">
                        </div>
                    </div>
                    <button class="carousel-control-prev" type="button" data-bs-target="#propertyCarousel" data-bs-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Previous</span>
                    </button>
                    <button class="carousel-control-next" type="button" data-bs-target="#propertyCarousel" data-bs-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="visually-hidden">Next</span>
                    </button>
                </div>
            </div>

            <div class="col-md-4">
                <div class="landlord-info">
                    <img src="{{data.img_path}}{{landlord_data.profile_pic}}" alt="Landlord">
                    <h5>{{landlord_data['first_name']}} {{ landlord_data['last_name'] }}</h5>
                    <p>Contact: {{landlord_data['email']}}</p>
                </div>
                {%  if logged_in and data.user_data.landlord %}
                <div></div>
                {% else %}
                <button class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#appointmentModal">Book a Tour</button>
                <button class="btn btn-secondary w-100" data-bs-toggle="modal" data-bs-target={% if logged_in %}"#tenancyModal" {% else %} "#loginModal" {% endif %}>Apply for Tenancy</button>
                {% endif %}
            </div>
        </div>

        <div class="row property-details">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <h5 class="card-title">Property Details</h5>
                        <ul>
                            <li><i class="fas fa-tag"></i> Price: ₦{{data.price}}/yr</li>
                            <li><i class="fas fa-bed"></i> Bedrooms: {{ data.bedrooms }}</li>
                            <li><i class="fas fa-bath"></i> Bathrooms: {{ data.bathrooms }}</li>
                            {% if data.sqft == None %}
                            
                            {% else %}
                            <li><i class="fas fa-ruler-combined"></i> Square Feet: {{ data.sqft }} sqft</li>
                            {% endif %}
                            <li><i class="fas fa-home"></i> Status: {{data.status}}</li>
                            <li><i class="fas fa-info-circle"></i> Description: {{ data.description }} </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modals for images -->
    <div class="modal fade" id="imageModal1" tabindex="-1" aria-labelledby="imageModalLabel1" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel1">Property Image 1</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img src="{{data.property_imgs}}{{data.file_1}}" alt="Property Image 1" class="img-fluid">
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="imageModal2" tabindex="-1" aria-labelledby="imageModalLabel2" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel2">Property Image 2</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img src="{{data.property_imgs}}{{data.file_2}}" alt="Property Image 2" class="img-fluid">
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="imageModal3" tabindex="-1" aria-labelledby="imageModalLabel3" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="imageModalLabel3">Property Image 3</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <img src="{{data.property_imgs}}{{data.file_3}}" alt="Property Image 3" class="img-fluid">
                </div>
            </div>
        </div>
    </div>

    <!-- Appointment Modal -->
    <div class="modal fade" id="appointmentModal" tabindex="-1" aria-labelledby="appointmentModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="appointmentModalLabel">Book a Tour</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="{{url_for('make_booking', property_id=data.id)}}" method="post">
                        <div class="mb-3">
                            <label for="name" class="form-label">Name</label>
                            <input type="text" class="form-control" id="name" name="name" value="{% if logged_in %}{{ data['user_data']['first_name'] }} {{ data['user_data']['last_name'] }} {% endif %}" required>
                        </div>
                        <div class="mb-3">
                            <label for="email" class="form-label">Email</label>
                            <input type="email" class="form-control" id="email"  name="email" value="{% if logged_in %}{{ data['user_data']['email'] }}{% endif %}">
                        </div>
                        <div class="mb-3">
                            <label for="phone" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="phone" name="phone_number" value="{% if logged_in %}{{ data['user_data']['phone_number'] }}{% endif %}" required>
                        </div>
                        <div class="mb-3">
                            <label for="viewing_date" class="form-label">Viewing Date</label>
                            <input type="date" class="form-control" id="viewing_date" name="viewing_date" required>
                        </div>
                        <div class="mb-3">
                            <label for="viewing_time" class="form-label">Viewing Time</label>
                            <input type="time" class="form-control" id="viewing_time" name="viewing_time" required>
                        </div>
                        <div class="mb-3">
                            <label for="notes" class="form-label">Notes</label>
                            <textarea class="form-control" id="notes" name="notes" rows="3"></textarea>
                        </div>
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </form>
                </div>
            </div>
        </div>
    </div>

 <!-- Login Modal -->
<div class="modal fade" id="loginModal" tabindex="-1" aria-labelledby="loginModalLabel" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="loginModalLabel">Login</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <form action="login" method="post">
                    <div class="mb-3">
                        <label for="loginEmail" class="form-label">Email</label>
                        <input type="email" class="form-control" id="loginEmail" name="email" required>
                    </div>
                    <div class="mb-3 position-relative">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" id="password" name="password" class="form-control" required>
                        <i class="far fa-eye-slash toggle-password" style="cursor: pointer; position: absolute; right: 10px; top: 36px;"></i>
                      </div>
                    <button type="submit" class="btn btn-primary w-100">Login</button>
                </form>
                <div class="mt-3 text-center">
                    <p class="mb-0">Don't have an account? <a href="{{url_for('signup')}}">Sign Up</a></p>
                    <p class="mb-0"><a href="{{url_for('forgot_password')}}">Forgot Password?</a></p>
                </div>
            </div>
        </div>
    </div>
</div>

    <!-- Tenancy Application Modal -->
    {% if logged_in %}
    <div class="modal fade" id="tenancyModal" tabindex="-1" aria-labelledby="tenancyModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="tenancyModalLabel">Apply for Tenancy</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form>
                        <div class="mb-3">
                            <label for="first_name" class="form-label">First Name</label>
                            <input type="text" class="form-control" id="first_name" name="first_name" value="{% if logged_in %}{{ data['user_data']['first_name'] }}{% endif %}" required>
                        </div>
                        <div class="mb-3">
                            <label for="last_name" class="form-label">Last Name</label>
                            <input type="text" class="form-control" id="last_name" name="last_name" value="{% if logged_in %}{{ data['user_data']['last_name'] }}{% endif %}" required>
                        </div>
                        <div class="mb-3">
                            <label for="date_of_birth" class="form-label">Date of Birth</label>
                            <input type="date" class="form-control" id="date_of_birth" name="date_of_birth" required>
                        </div>
                        <div class="mb-3">
                            <label for="national_identity_number" class="form-label">National Identity Number</label>
                            <input type="text" class="form-control" id="national_identity_number" name="national_identity_number" required>
                        </div>
                        <div class="mb-3">
                            <label for="email_address" class="form-label">Email Address</label>
                            <input type="email" class="form-control" id="email_address" name="email_address" value="{% if logged_in %}{{ data['user_data']['email'] }}{% endif %}" required>
                        </div>
                        <div class="mb-3">
                            <label for="phone_number" class="form-label">Phone Number</label>
                            <input type="tel" class="form-control" id="phone_number" name="phone_number"  value="{% if logged_in %}{{ data['user_data']['phone_number'] }}{% endif %}" required>
                        </div>
                        <div class="mb-3">
                            <label for="current_address" class="form-label">Current Address</label>
                            <input type="text" class="form-control" id="current_address" name="current_address" required>
                        </div>
                        <div class="mb-3">
                            <label for="previous_address" class="form-label">Previous Address</label>
                            <input type="text" class="form-control" id="previous_address" name="previous_address">
                        </div>
                        <div class="mb-3">
                            <label for="employer_name" class="form-label">Employer Name</label>
                            <input type="text" class="form-control" id="employer_name" name="employer_name" required>
                        </div>
                        <div class="mb-3">
                            <label for="job_title" class="form-label">Job Title</label>
                            <input type="text" class="form-control" id="job_title" name="job_title" required>
                        </div>
                        <div class="mb-3">
                            <label for="employment_duration" class="form-label">Employment Duration (years)</label>
                            <input type="number" class="form-control" id="employment_duration" name="employment_duration" required>
                        </div>
                        <div class="mb-3">
                            <label for="monthly_income" class="form-label">Monthly Income</label>
                            <input type="number" step="0.01" class="form-control" id="monthly_income" name="monthly_income" required>
                        </div>
                        <div class="mb-3">
                            <label for="previous_landlord_name" class="form-label">Previous Landlord Name</label>
                            <input type="text" class="form-control" id="previous_landlord_name" name="previous_landlord_name">
                        </div>
                        <div class="mb-3">
                            <label for="previous_landlord_contact" class="form-label">Previous Landlord Contact</label>
                            <input type="text" class="form-control" id="previous_landlord_contact" name="previous_landlord_contact">
                        </div>
                        <div class="mb-3">
                            <label for="reason_for_moving" class="form-label">Reason for Moving</label>
                            <input type="text" class="form-control" id="reason_for_moving" name="reason_for_moving">
                        </div>
                        <div class="mb-3">
                            <label for="personal_reference_name" class="form-label">Personal Reference Name</label>
                            <input type="text" class="form-control" id="personal_reference_name" name="personal_reference_name">
                        </div>
                        <div class="mb-3">
                            <label for="personal_reference_contact" class="form-label">Personal Reference Contact</label>
                            <input type="text" class="form-control" id="personal_reference_contact" name="personal_reference_contact">
                        </div>
                        <div class="mb-3">
                            <label for="professional_reference_name" class="form-label">Professional Reference Name</label>
                            <input type="text" class="form-control" id="professional_reference_name" name="professional_reference_name">
                        </div>
                        <div class="mb-3">
                            <label for="professional_reference_contact" class="form-label">Professional Reference Contact</label>
                            <input type="text" class="form-control" id="professional_reference_contact" name="professional_reference_contact">
                        </div>
                        <div class="mb-3">
                            <label for="application_date" class="form-label">Application Date</label>
                            <input type="date" class="form-control" id="application_date" name="application_date" required>
                        </div>
                        <div class="mb-3">
                            <label for="desired_move_in_date" class="form-label">Desired Move-In Date</label>
                            <input type="date" class="form-control" id="desired_move_in_date" name="desired_move_in_date" required>
                        </div>
                        <div class="mb-3">
                            <label for="criminal_record" class="form-label">Criminal Record</label>
                            <textarea class="form-control" id="criminal_record" name="criminal_record" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="pets" class="form-label">Pets</label>
                            <input type="text" class="form-control" id="pets" name="pets">
                        </div>
                        <div class="mb-3">
                            <label for="number_of_occupants" class="form-label">Number of Occupants</label>
                            <input type="number" class="form-control" id="number_of_occupants" name="number_of_occupants" required>
                        </div>
                        <div class="mb-3">
                            <label for="special_requests" class="form-label">Special Requests</label>
                            <textarea class="form-control" id="special_requests" name="special_requests" rows="3"></textarea>
                        </div>
                        <div class="mb-3">
                            <label for="file_upload" class="form-label">Upload Document</label>
                            <input type="file" class="form-control" id="file_upload" name="file_upload" multiple accept=".pdf">
                        </div>
                        
                        <div id="uploaded_files" class="card-container"></div>
                        
                        <div id="error_message" class="text-danger mt-2" style="display: none;"></div>
                        
                        <button type="submit" class="btn btn-primary">Submit</button>
                    </form>
                    
                </div>
            </div>
        </div>
    </div>
    {% endif %}

     <!---- Profile Modal ----->
     {% if logged_in %}
     <div class="modal fade" id="userDetailsModal" tabindex="-1" aria-labelledby="userDetailsModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content">
                <div class="modal-body">
                    <form action="change_profile_pic" method="POST" enctype="multipart/form-data">
                        <div class="d-flex justify-content-center mb-4">
                            <div class="profile-pic-container">
                                <input type="file" id="profilePicInput" name="profile_pic" class="profile-pic-input" accept="image/*">
                                <label for="profilePicInput" class="profile-pic-label">
                                    <img id="profilePic" src="{{data['profile_pic']}}" alt="Profile Picture" class="profile-pic2">
                                    <div class="profile-pic-overlay">
                                        <i class="fas fa-camera"></i>
                                        <span>Change</span>
                                    </div>
                                </label>
                                <button type="submit" class="change-btn">Save</button>
                            </div>
                        </div>
                    <div class="mb-3">
                        <label for="firstName" class="form-label">First Name</label>
                        <input type="text" class="form-control" id="firstName" value="{{data.user_data.first_name}}" disabled>
                    </div>
                    <div class="mb-3">
                        <label for="lastName" class="form-label">Last Name</label>
                        <input type="text" class="form-control" id="lastName" value="{{data.user_data.last_name}}" disabled>
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Email</label>
                        <input type="email" class="form-control" id="email" value="{{data.user_data.email}}" disabled>
                    </div>
                    <div class="mb-3">
                        <label for="email" class="form-label">Phone Number</label>
                        <input type="number" class="form-control" id="phone_no" value="{{data.user_data.phone_number}}" disabled>
                    </div>
                    <div class="mb-3 form-check">
                        <input type="checkbox" class="form-check-input" id="isTenant" {% if data.user_data["landlord"] %} checked {% else %} unchecked {% endif %} disabled>
                        <label class="form-check-label" for="isTenant">Landlord</label>
                    </div>
                    <div class="mb-3">
                        <label for="password" class="form-label">Password</label>
                        <input type="password" class="form-control" id="password" value="********" disabled>
                    </div>
                </div>
                <div class="modal-footer">
                    <a href="{{ url_for('edit_user_info') }}" class="btn btn-primary">Edit Details</a>
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
                </div>
            </div>
        </div>
    </div>
    {% endif %}

    <!-- Bottom Navigation -->
     {% if logged_in %}
    <nav class="bottom-nav">
        <a class="nav-link" href="{{url_for('home')}}">
            <i class="fas fa-home"></i>
            Home
        </a>
        <a class="nav-link" href="{{url_for('dashboard')}}">
            <i class="fas fa-chart-line"> </i>
            Dashboard
        </a>
        <a class="nav-link" href="{{url_for('search')}}">
            <i class="fas fa-search"></i>
            Search
        </a>
        <a class="nav-link" href="#" data-bs-toggle="modal" data-bs-target="#userDetailsModal">
            <i class="fas fa-user"></i>
            Profile
        </a>
    </nav>
    {% endif %}
    </div>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.6/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha1/dist/js/bootstrap.min.js"></script>
</body>
<footer class="footer">
    <div class="container">
        <div class="row">
            <div class="col-md-4 mb-3 mb-md-0">
                <h5>RENTLY</h5>
                <p>Your trusted partner in finding the perfect rental property.</p>
            </div>
            <div class="col-md-4 mb-3 mb-md-0">
                <h5>Quick Links</h5>
                <ul class="list-unstyled">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">About</a></li>
                    <li><a href="#">Contact</a></li>
                    <li><a href="#">Terms of Service</a></li>
                    <li><a href="#">Privacy Policy</a></li>
                </ul>
            </div>
            <div class="col-md-4 mb-3 mb-md-0">
                <h5>Follow Us</h5>
                <div class="social-links">
                    <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                    <a href="#" class="social-icon"><i class="fab fa-linkedin-in"></i></a>
                </div>
            </div>
        </div>
        <div class="text-center mt-4">
            <p>&copy; 2024 RENTLY. All Rights Reserved.</p>
        </div>
    </div>
</footer>

<script>
    document.getElementById('file_upload').addEventListener('change', function(event) {
        const uploadedFilesContainer = document.getElementById('uploaded_files');
        const errorMessage = document.getElementById('error_message');
        const maxFiles = 3;
        const files = Array.from(event.target.files);
    
        // Clear any previous error messages
        errorMessage.style.display = 'none';
    
        // Validate file types and limit number of files
        for (const file of files) {
            if (file.type !== "application/pdf") {
                errorMessage.textContent = 'Only PDF files are allowed.';
                errorMessage.style.display = 'block';
                event.target.value = ''; // Clear the file input
                return;
            }
        }
    
        if (uploadedFilesContainer.children.length + files.length > maxFiles) {
            errorMessage.textContent = `You can only upload a maximum of ${maxFiles} files.`;
            errorMessage.style.display = 'block';
            event.target.value = ''; // Clear the file input
            return;
        }
    
        files.forEach((file, index) => {
            const fileCard = document.createElement('div');
            fileCard.className = 'card card-file';
            fileCard.setAttribute('data-bs-toggle', 'modal');
            fileCard.setAttribute('data-bs-target', `#fileModal${uploadedFilesContainer.children.length + 1}`);
    
            const cardHeader = document.createElement('div');
            cardHeader.className = 'card-header';
    
            const button = document.createElement('button');
            button.type = 'button';
            button.textContent = file.name;
    
            cardHeader.appendChild(button);
            fileCard.appendChild(cardHeader);
            uploadedFilesContainer.appendChild(fileCard);
    
            // Create modals for PDF viewing using PDF.js
            const modalHTML = `
                <div class="modal fade" id="fileModal${uploadedFilesContainer.children.length}" tabindex="-1" aria-labelledby="fileModalLabel${uploadedFilesContainer.children.length}" aria-hidden="true">
                    <div class="modal-dialog modal-lg">
                        <div class="modal-content">
                            <div class="modal-header">
                                <h5 class="modal-title" id="fileModalLabel${uploadedFilesContainer.children.length}">${file.name}</h5>
                                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                            </div>
                            <div class="modal-body">
                                <div id="pdfViewer${uploadedFilesContainer.children.length}" class="pdfViewer"></div>
                            </div>
                        </div>
                    </div>
                </div>
            `;
            document.body.insertAdjacentHTML('beforeend', modalHTML);
    
            // Render the PDF file using PDF.js
            const reader = new FileReader();
            reader.onload = function(e) {
                const pdfData = new Uint8Array(e.target.result);
                const loadingTask = pdfjsLib.getDocument({ data: pdfData });
                loadingTask.promise.then(function(pdf) {
                    pdf.getPage(1).then(function(page) {
                        const scale = 1.5;
                        const viewport = page.getViewport({ scale });
                        const canvas = document.createElement('canvas');
                        const context = canvas.getContext('2d');
                        canvas.height = viewport.height;
                        canvas.width = viewport.width;
                        page.render({ canvasContext: context, viewport: viewport }).promise.then(function() {
                            document.getElementById(`pdfViewer${uploadedFilesContainer.children.length}`).appendChild(canvas);
                        });
                    });
                });
            };
            reader.readAsArrayBuffer(file);
        });
    
        // Clear the file input after processing
        event.target.value = '';
    });

    document.querySelector('.toggle-password').addEventListener('click', function (e) {
        const passwordInput = document.getElementById('password');
        const icon = e.target;
        // Toggle the type attribute of the password input
        const type = passwordInput.getAttribute('type') === 'password' ? 'text' : 'password';
        passwordInput.setAttribute('type', type);
        
        // Toggle the icon class
        icon.classList.toggle('fa-eye-slash');
        icon.classList.toggle('fa-eye');
    });
    
</script>

</html>
